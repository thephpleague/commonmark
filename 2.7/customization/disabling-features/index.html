




<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
        <meta name="description" content="How to disable certain features of this library">
    
    <meta name="docsearch:version" content="2.7">
    
        <title>Disabling Features - CommonMark for PHP</title>
    
    <link rel="icon" type="image/x-icon" href="//theme.thephpleague.com/img/favicon.ico" />
    <link rel="apple-touch-icon-precomposed" href="//theme.thephpleague.com/img/apple-touch-icon-precomposed.png">
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@thephpleague" />
    <meta name="twitter:creator" content="@colinodell" />
    <meta property="og:url" content="https://commonmark.thephpleague.com/2.7/customization/disabling-features/" />
    
        <meta property="og:title" content="Disabling Features - CommonMark for PHP" />
    
    
        <meta property="og:description" content="How to disable certain features of this library" />
    
    <meta property="og:image" content="https://commonmark.thephpleague.com/images/commonmark-social.png" />
    <link rel="stylesheet" href="//theme.thephpleague.com/css/all.css?">
    <link rel="stylesheet" href="/custom.css?">
    <link rel="stylesheet" href="/global.css?">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
    <link rel="stylesheet" href="/support.css?">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" integrity="sha256-h20CPZ0QyXlBuAw7A+KluUYx/3pK+c7lYEpqLTlxjYQ=" crossorigin="anonymous" />
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-137970568-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-137970568-1');
    </script>
</head>
<body>
<header>
    <div class="header-content">
        <h1 class="title">
            <a class="logo" href="/">
            <span class="name">
                <em>League\</em>CommonMark
            </span>
            </a>
        </h1>
        <div class="search"><input type="search" id="doc-search" placeholder="search the docs..."></div>
        <nav class="versions">
            <h2>v2.7 &#9662;</h2>
            <ul>
            
                <li class="selected"><a href="/2.7/customization/disabling-features/">v2.7</a></li>
            
                <li ><a href="/2.6/customization/disabling-features/">v2.6</a></li>
            
                <li ><a href="/2.5/customization/disabling-features/">v2.5</a></li>
            
                <li ><a href="/2.4/customization/disabling-features/">v2.4</a></li>
            
                <li ><a href="/2.3/">v2.3</a></li>
            
                <li ><a href="/2.2/">v2.2</a></li>
            
                <li ><a href="/2.1/">v2.1</a></li>
            
                <li ><a href="/2.0/">v2.0</a></li>
            
                <li ><a href="/1.6/">v1.6</a></li>
            
                <li ><a href="/releases/">Notes</a></li>
            </ul>
        </nav>
    </div>
</header>

<input type="checkbox" id="menu">
<label for="menu" onclick>
    <div class="closed">&#9776;</div>
    <div class="open">&#10799;</div>
</label>

<main>
    <menu>
        <div class="versions-small">
        <h2>Versions</h2>
            <ul>
        
                <li class="selected">
                    <a href="/2.7/">2.7</a>
                </li>
        
                <li >
                    <a href="/2.6/">2.6</a>
                </li>
        
                <li >
                    <a href="/2.5/">2.5</a>
                </li>
        
                <li >
                    <a href="/2.4/">2.4</a>
                </li>
        
                <li >
                    <a href="/2.3/">2.3</a>
                </li>
        
                <li >
                    <a href="/2.2/">2.2</a>
                </li>
        
                <li >
                    <a href="/2.1/">2.1</a>
                </li>
        
                <li >
                    <a href="/2.0/">2.0</a>
                </li>
        
                <li >
                    <a href="/1.6/">1.6</a>
                </li>
        
                <li ><a href="/releases/">Releases Notes</a></li>
            </ul>
        </div>

        
            
            <div class="menu-section">
                <h2>Getting Started</h2>
                <ul>
                    
                        <li >
                            <a href="/2.7/">Overview</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/installation/">Installation</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/upgrading/">Upgrading from 2.5</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/changelog/">Changelog</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/support/">Support</a>
                        </li>
                    
                </ul>
            </div>
            
            <div class="menu-section">
                <h2>Usage</h2>
                <ul>
                    
                        <li >
                            <a href="/2.7/basic-usage/">Basic Usage</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/configuration/">Configuration</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/security/">Security</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/xml/">XML</a>
                        </li>
                    
                </ul>
            </div>
            
            <div class="menu-section">
                <h2>Extensions</h2>
                <ul>
                    
                        <li >
                            <a href="/2.7/extensions/overview/">Overview</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/extensions/commonmark/">CommonMark</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/extensions/github-flavored-markdown/">GitHub-Flavored Markdown</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/extensions/attributes/">Attributes</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/extensions/autolinks/">Autolinks</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/extensions/default-attributes/">Default Attributes</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/extensions/description-lists/">Description Lists</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/extensions/disallowed-raw-html/">Disallowed Raw HTML</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/extensions/embed/">Embed</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/extensions/external-links/">External Links</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/extensions/footnotes/">Footnotes</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/extensions/front-matter/">Front Matter</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/extensions/heading-permalinks/">Heading Permalinks</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/extensions/inlines-only/">Inlines Only</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/extensions/mentions/">Mentions</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/extensions/smart-punctuation/">Smart Punctuation</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/extensions/strikethrough/">Strikethrough</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/extensions/table-of-contents/">Table of Contents</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/extensions/tables/">Tables</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/extensions/task-lists/">Task Lists</a>
                        </li>
                    
                </ul>
            </div>
            
            <div class="menu-section">
                <h2>Customization</h2>
                <ul>
                    
                        <li >
                            <a href="/2.7/customization/overview/">Overview</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/customization/environment/">Environment</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/customization/extensions/">Extensions</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/customization/configuration/">Configuration</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/customization/event-dispatcher/">Event Dispatcher</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/customization/cursor/">Cursor</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/customization/block-parsing/">Block Parsing</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/customization/inline-parsing/">Inline Parsing</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/customization/delimiter-processing/">Delimiter Processing</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/customization/abstract-syntax-tree/">Abstract Syntax Tree</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/customization/rendering/">Rendering</a>
                        </li>
                    
                        <li >
                            <a href="/2.7/customization/slug-normalizer/">Slug Normalizer</a>
                        </li>
                    
                        <li class="selected">
                            <a href="/2.7/customization/disabling-features/">Disabling Features</a>
                        </li>
                    
                </ul>
            </div>
            
        
    </menu>
    <article>
    

    

    

        <h1 id="disabling-features">Disabling Features</h1>

<p>The CommonMark parser is designed to be highly configurable.  You can disable certain features that you don’t want to have in your application.  There are a few ways to do this, depending on your needs:</p>

<h2 id="avoiding-parsing">Avoiding Parsing</h2>

<p>You cannot disable an already-registered parser, but you can prevent it from being registered with
the <a href="/2.7/customization/environment/"><code class="language-plaintext highlighter-rouge">Environment</code></a> in the first place.  This is exactly how the
<a href="/2.7/extensions/inlines-only/"><code class="language-plaintext highlighter-rouge">InlinesOnlyExtension</code></a> works - it’s a copy of the <code class="language-plaintext highlighter-rouge">CommonMarkCoreExtension</code> class but
with the parsers we don’t want removed.</p>

<p>You can mirror this approach by defining your own <a href="/2.7/customization/extensions/">custom extension class</a> that registers
only the specific parsers, renderers, etc. that you want.</p>

<p>The only potential downside to this approach is that any syntax for those disabled features will appear in the output.
For example, if you were to prevent block quotes from being parsed, then the following Markdown:</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gt">&gt; This is a block quote</span>
</code></pre></div></div>

<p>Would have the <code class="language-plaintext highlighter-rouge">&gt;</code> character appear in the output HTML:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;p&gt;</span><span class="ni">&amp;gt;</span> This is a block quote<span class="nt">&lt;/p&gt;</span>
</code></pre></div></div>

<p>This is probably fine for most use cases.</p>

<h2 id="removing-parsed-elements">Removing Parsed Elements</h2>

<p>An alternative approach is to keep the parser enabled, but remove the parsed elements from the AST before rendering.</p>

<p>You’d create an <a href="/2.7/customization/event-dispatcher/#registering-listeners">event listener</a>
(sort of like <a href="/2.7/customization/event-dispatcher/#example">this one</a>) that will
<a href="/2.7/customization/abstract-syntax-tree/">iterate all parsed elements</a>, locate the target nodes, and remove them
by calling <code class="language-plaintext highlighter-rouge">$node-&gt;detach()</code>.</p>

<p>There are three potential advantages to this approach:</p>

<ol>
  <li>You don’t need to create a custom extension class or prevent parsers from being registered</li>
  <li>You can selectively remove certain elements based on their properties (e.g. only remove heading levels 3-6) while keeping others</li>
  <li>The syntax and contents of the removed elements will not appear in the output HTML</li>
</ol>

<p>The downside is that you still incur the overhead of parsing the elements that are eventually removed.</p>

<h2 id="override-rendering">Override Rendering</h2>

<p>The final approach is to keep the parser enabled, but override how the parsed elements are rendered.  For example,
you could implement a <a href="/2.7/customization/rendering/">custom renderer</a> for certain elements that simply returns
something else (perhaps an empty string, or an HTML comment of <code class="language-plaintext highlighter-rouge">&lt;!-- REMOVED --&gt;</code>) instead of the HTML you don’t want.</p>

<p>This approach is not recommended because:</p>

<ol>
  <li>You still incur the overhead of parsing the elements that are eventually removed</li>
  <li>You’d need to register your custom renderer with a higher priority than the default renderer</li>
  <li>You’d need to repeat this for every renderer that could potentially render the elements you want to remove</li>
</ol>

<p>It should technically work though, if you <em>really</em> want to go this route.</p>


        <hr>

        <p>
            <a class="btn btn-sm btn-black" href="https://github.com/thephpleague/commonmark/edit/2.7/docs/2.7/customization/disabling-features.md" title="Edit this page on GitHub" target="_blank" rel="noopener"><i class="fas fa-edit"></i> Edit this page</a>
        </p>
    </article>

    <aside class="support-banner-wrapper" x-data="{ show: false }" x-show.transition="show" x-init="h = localStorage.getItem('hideBanner'); (h === null || h < (new Date().getTime())) ? (setTimeout(() => show = true, 500)) : (show = false)">
        <div class="support-banner">
            <p class="support-banner-left">
                <strong>Love PHP Commonmark?</strong>
                <span class="hidden sm:inline-block lg:hidden">
                    Show your support!
                </span>

                <span class="hidden lg:inline-block">
                    Support development via monthly sponsorship or a one-time donation!
                </span>
            </p>

            <div class="support-banner-right">
                <a href="https://github.com/sponsors/colinodell" class="btn btn-pink btn-block">
                    <i class="fas fa-heart fa-fw" aria-hidden="true"></i> Sponsor
                </a>

                <a href="https://www.paypal.me/colinpodell/10.00" class="btn btn-green btn-block">
                    <i class="fas fa-donate fa-fw" aria-hidden="true"></i> Donate
                </a>
            </div>

            <button x-on:click="localStorage.setItem('hideBanner', new Date().getTime() + (7*24*60*60*1000)); show = false" class="support-banner-close">
                <i class="fas fa-times" aria-hidden="true"></i>
            </button>
        </div>
    </aside>
</main>

<footer>
    <span>&copy; Copyright <a href="https://www.colinodell.com">Colin O'Dell</a> &amp; <a href="//thephpleague.com">The League of Extraordinary Packages</a>.</span>
    <span>Site design by <a href="//reinink.ca">Jonathan Reinink</a> and <a href="//nyamsprod.com">Ignace Nyamagana Butera</a>.</span>
</footer>
<script src="/custom.js?"></script>
<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js" defer></script>
<script> docsearch({
    apiKey: 'f8a60b0120292f75f23d313f6cebba05',
    appId: '5WPQI5503X',
    indexName: 'commonmark-thephpleague',
    inputSelector: '#doc-search',
    algoliaOptions: { 'facetFilters': ["version:v2.7"] },
    debug: false // Set debug to true if you want to inspect the dropdown
});
</script>
</body>
</html>
